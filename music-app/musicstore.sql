CREATE DATABASE MUSICSTORE;

CREATE TABLE USER (
  user_id INTEGER NOT NULL AUTO_INCREMENT,
  name_user VARCHAR(255),
  PRIMARY KEY (user_id)
);

CREATE TABLE PRODUCT_TYPE (
	product_type_id INTEGER NOT NULL,
	description VARCHAR(255),
	PRIMARY KEY(product_type_id)
);

CREATE TABLE GENRE(
	genre_id INTEGER NOT NULL AUTO_INCREMENT,
	genre VARCHAR(255),
	PRIMARY KEY(genre_id)
);

CREATE TABLE PRODUCT (
	product_id INTEGER NOT NULL AUTO_INCREMENT,
	product_type_id INTEGER NOT NULL,
	name VARCHAR(255),
	genre_id INTEGER,
	price DECIMAL(6,2),
	PRIMARY KEY (product_id),
	FOREIGN KEY (product_type_id) REFERENCES PRODUCT_TYPE(product_type_id),
	FOREIGN KEY (genre_id) REFERENCES GENRE(genre_id)
);

CREATE TABLE ORDERS (
	 order_id INTEGER NOT NULL,
	 user_id INTEGER NOT NULL,
	 total_price DECIMAL(6,2),
	 discount_percentage DECIMAL(2,2),
	 sale_date DATETIME,
	 status VARCHAR(100),
	 PRIMARY KEY(order_id, user_id),
	 FOREIGN KEY(user_id) REFERENCES USER(user_id)
);

CREATE TABLE ORDER_ITEM (
	order_item_id Integer NOT NULL,
	order_id integer NOT NULL,
	product_id Integer,
	quantity Integer,
	price DECIMAL(6,2),
	PRIMARY KEY (order_item_id, order_id),
	FOREIGN KEY (order_id) REFERENCES ORDERS(order_id),
	FOREIGN KEY (product_id) REFERENCES PRODUCT(product_id)
);



-- GENRE
INSERT INTO GENRE VALUES(1, 'JAZZ');
INSERT INTO GENRE VALUES(2, 'POP');
INSERT INTO GENRE VALUES(3, 'R&B');
INSERT INTO GENRE VALUES(4, 'CLASSICAL');
INSERT INTO GENRE VALUES(5, 'DANCE');

-- USER
INSERT INTO USER VALUES(1, 'MiuMiu');
INSERT INTO USER VALUES(2, 'Coco');
INSERT INTO USER VALUES(3, 'Gigi');
INSERT INTO USER VALUES(4, 'Luigi');
INSERT INTO USER VALUES(5, 'Mike');
INSERT INTO USER VALUES(6, 'Kate');

-- PRODUCT_TYPE
INSERT INTO PRODUCT_TYPE VALUES(1, 'Album');
INSERT INTO PRODUCT_TYPE VALUES(2, 'Song');
INSERT INTO PRODUCT_TYPE VALUES(3, 'MemberShip VIP GOLD Yearly');
INSERT INTO PRODUCT_TYPE VALUES(4, 'MemberShip VIP GOLD Monthly');
INSERT INTO PRODUCT_TYPE VALUES(5, 'MemberShip VIP Silver Monthly');

-- PRODUCT
INSERT INTO PRODUCT VALUES(1, 1, 'I can do it with a broken heart',1, 20);
INSERT INTO PRODUCT VALUES(2, 1, 'Dangerous Women',1, 20);
INSERT INTO PRODUCT VALUES(3, 1, 'Thank you, next',1, 30);
INSERT INTO PRODUCT VALUES(4, 1, 'Startboy',1, 40);
INSERT INTO PRODUCT VALUES(5, 1, 'Style',1, 50);

--ORDERS
--DATETIME 'YYYY-MM-DD hh:mm:ss'
INSERT INTO ORDERS VALUES(1, 4, 70, 0, '2024-08-27 09:15:07', 'ORDER PLACED');
INSERT INTO ORDERS VALUES(2, 4, 90, 0, '2024-08-29 09:10:45', 'ORDER PLACED' );
INSERT INTO ORDERS VALUES(3, 5, 70, 0, '2024-08-27 10:25:24', 'ORDER PLACED');
INSERT INTO ORDERS VALUES(4, 5, 90, 0, '2024-08-28 11:10:45', 'ORDER PLACED');

-- ORDER_ITEM
INSERT INTO ORDER_ITEM VALUES(1, 1, 1, 1, 20);
INSERT INTO ORDER_ITEM VALUES(2, 1, 2, 1, 20);
INSERT INTO ORDER_ITEM VALUES(3, 1, 3, 1, 30);

INSERT INTO ORDER_ITEM VALUES(4, 2, 4, 1, 40);
INSERT INTO ORDER_ITEM VALUES(5, 2, 5, 1, 50);

INSERT INTO ORDER_ITEM VALUES(6, 3, 1, 1, 20);
INSERT INTO ORDER_ITEM VALUES(7, 3, 2, 1, 20);
INSERT INTO ORDER_ITEM VALUES(8, 3, 3, 1, 30);

INSERT INTO ORDER_ITEM VALUES(9, 4, 4, 1, 40);
INSERT INTO ORDER_ITEM VALUES(10, 4, 5, 1, 50);

-- Drop tables
DROP TABLE USER;
DROP TABLE PRODUCT;
DROP TABLE GENRE;
DROP TABLE PRODUCT_TYPE;
DROP TABLE ORDER_ITEM;
DROP TABLE ORDERS;



